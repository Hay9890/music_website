{% extends "base.html" %}
{% block title %}üí≥ Ch·ªçn c·ªïng thanh to√°n{% endblock %}

{% block content %}
<div class="container mt-5" style="animation: fadeIn 0.8s ease;">
  <div class="card mx-auto p-4 shadow-lg"
       style="max-width:780px; background:rgba(255,255,255,0.04); border-radius:18px;
              border:1px solid rgba(255,215,0,0.2); box-shadow:0 0 25px rgba(255,215,0,0.15);">

    <h3 class="text-center mb-3" style="color:#ffd700;">
      üí≥ Thanh to√°n ‚Äî {{ plan.label }} ({{ plan.price }})
    </h3>
    <p class="text-center text-muted">Ch·ªçn 1 ph∆∞∆°ng th·ª©c thanh to√°n v√† x√°c nh·∫≠n giao d·ªãch (demo).</p>

    <form method="post" action="{% url 'confirm_payment' %}">
      {% csrf_token %}
      <div class="row mt-4">
        <!-- C·ªôt b√™n tr√°i: l·ª±a ch·ªçn ph∆∞∆°ng th·ª©c -->
        <div class="col-md-6">
          <h6 class="text-light mb-3">Ph∆∞∆°ng th·ª©c thanh to√°n</h6>

          {% for opt in payment_options %}
            <div class="form-check mb-2">
              <input class="form-check-input" type="radio" name="method" id="m_{{ opt.id }}" value="{{ opt.id }}" {% if forloop.first %}checked{% endif %}>
              <label class="form-check-label text-light" for="m_{{ opt.id }}">
                {{ opt.label }}
              </label>
            </div>
          {% endfor %}

          <p class="text-muted small mt-3">
            ‚ö†Ô∏è L∆∞u √Ω: ƒê√¢y l√† b·∫£n <b>demo</b>, kh√¥ng th·ª±c hi·ªán giao d·ªãch th·∫≠t.
          </p>

          <div class="mt-4">
            <button type="submit"
                    class="btn w-100"
                    style="background: linear-gradient(90deg,#ff33cc,#ffd700);
                           color:white; font-weight:600; border:none; padding:10px 25px;
                           border-radius:12px; transition:0.3s ease;">
              ‚úÖ X√°c nh·∫≠n thanh to√°n
            </button>
          </div>
        </div>

        <!-- C·ªôt b√™n ph·∫£i: m√£ QR -->
        <div class="col-md-6 text-center">
          <h6 class="text-light mb-3">QR thanh to√°n (gi·∫£ l·∫≠p)</h6>

          <div class="p-3 rounded"
               style="display:inline-block; background:rgba(255,255,255,0.05);
                      border:1px solid rgba(255,255,255,0.08); border-radius:15px;
                      box-shadow:0 0 15px rgba(255,215,0,0.15);">
            <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=MusicSite-Premium-{{ plan.label }}"
                 alt="QR thanh to√°n" style="width:200px; height:200px; border-radius:8px;">
          </div>

          <p class="text-muted mt-2 small">
            Qu√©t b·∫±ng ·ª©ng d·ª•ng <b>MoMo</b>, <b>VNPAY</b> ho·∫∑c <b>Ng√¢n h√†ng</b>.
          </p>

          <div class="text-muted small mt-3">
            <div>G√≥i: <b>{{ plan.label }}</b></div>
            <div>Gi√°: <b>{{ plan.price }}</b></div>
            <div>M√£ giao d·ªãch: <b>#MS{{ plan.days }}{{ user.id|default:999 }}</b></div>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>

<style>
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .btn:hover {
    transform: scale(1.03);
    box-shadow: 0 0 18px rgba(255, 215, 0, 0.4);
  }
</style>
{% endblock %}